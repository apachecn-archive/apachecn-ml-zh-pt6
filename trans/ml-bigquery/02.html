<html><head/><body>


	
		<title>B16722_01_Final_ASB_ePub</title>
		
	
	
		<div><h1 id="_idParaDest-16"><em class="italic"> <a id="_idTextAnchor016"/>第一章</em>:Google云和BigQuery简介</h1>
			<p>采用公共云使公司和用户能够获得创新且经济高效的技术。这在大数据和<strong class="bold">人工智能</strong> ( <strong class="bold"> AI </strong>)领域尤其有价值，在这些领域，新的解决方案正在提供仅在几年前使用内部系统似乎不可能实现的可能性。为了在公司的日常业务中发挥效力，新的人工智能能力需要在不同的角色之间共享，而不是只集中在技术人员身上。大多数云提供商目前正在解决跨不同部门和具有不同技能的员工民主化人工智能的挑战。</p>
			<p>在这种背景下，<strong class="bold"> Google Cloud </strong>提供了几项服务来加速大量数据的处理，构建<strong class="bold">机器学习</strong> ( <strong class="bold"> ML </strong>)应用，可以做出更好的决策。</p>
			<p>在本章中，我们将逐步介绍在接下来的实践活动中有用的主要概念。使用渐进式方法，我们将讨论以下主题:</p>
			<ul>
				<li>介绍谷歌云平台</li>
				<li>探索GCP的人工智能和人工智能服务</li>
				<li>BigQuery简介</li>
				<li>发现BigQuery ML</li>
				<li>了解BigQuery定价</li>
			</ul>
			<h1 id="_idParaDest-17"><a id="_idTextAnchor017"/>介绍谷歌云平台</h1>
			<p>从1998年推出谷歌搜索开始，谷歌已经开发了世界上最大最强大的IT基础设施之一。今天，这个基础设施被数十亿用户用来使用服务<a id="_idIndexMarker003"/>，例如<strong class="bold"> Gmail </strong>、<strong class="bold"> YouTube </strong>、<strong class="bold"> Google Photo </strong>和<strong class="bold"> Maps </strong>。10年后，2008年，谷歌决定向商业客户开放其网络和IT <a id="_idIndexMarker004"/>基础设施，将最初为消费者应用开发的<a id="_idIndexMarker005"/>基础设施用于公共<a id="_idIndexMarker006"/>服务，并推出<strong class="bold">谷歌云平台</strong> ( <strong class="bold"> GCP </strong>)。</p>
			<p>谷歌目前向大型企业和中小型企业提供的90多种服务涵盖以下类别:</p>
			<ul>
				<li><strong class="bold">计算</strong>:用于<a id="_idIndexMarker007"/>支持带有虚拟机的工作负载或应用，如Google Compute Engine，带有Google Kubernetes引擎的容器，或AppEngine等平台。</li>
				<li><strong class="bold">存储和数据库</strong>:用于以简单方便的方式存储数据集和对象。一些<a id="_idIndexMarker008"/>的例子是谷歌云存储、云SQL和Spanner。</li>
				<li><strong class="bold">联网</strong>:用于<a id="_idIndexMarker009"/>通过<strong class="bold">虚拟私有云</strong> ( <strong class="bold"> VPCs </strong>)、防火墙和完全托管的全球路由器，轻松连接全球各地的不同地点和数据中心<a id="_idIndexMarker010"/>。</li>
				<li><strong class="bold">大数据</strong>:用于<a id="_idIndexMarker011"/>以结构化、半结构化或非结构化格式存储和处理大量信息。这些服务包括Google DataProc，GCP提供的Hadoop服务，以及BigQuery，这也是本书的重点。</li>
				<li><strong class="bold"> AI和机器学习</strong>:这个产品区为不同<a id="_idIndexMarker012"/>类型的用户提供各种工具，使他们能够在日常业务中利用<a id="_idIndexMarker013"/> AI和ML。一些例子是TensorFlow、AutoML、Vision APIs和BigQuery ML，这是本书的重点。</li>
				<li><strong class="bold">身份、安全和管理工具</strong>:该领域包括防止<a id="_idIndexMarker014"/>未经授权的访问、确保安全和监控所有其他云基础设施所需的所有服务。身份访问管理、密钥管理服务、云日志和云审计日志只是这些工具中的一部分。</li>
				<li><strong class="bold">物联网</strong> ( <strong class="bold"> IoT </strong>):用于<a id="_idIndexMarker015"/>将植物、车辆或任何其他物体连接到GCP基础设施，实现现代物联网用例的开发。这一领域的核心组件是谷歌物联网核心。</li>
				<li><strong class="bold"> API管理</strong>:通过REST APIs向客户和合作伙伴公开服务的工具，提供了充分利用互连优势的能力。在这个支柱中，Google Apigee是最著名的产品之一，被公认为这个细分市场的领导者。</li>
				<li><strong class="bold">生产力</strong>:用于提高所有公司的生产力<a id="_idIndexMarker017"/>和协作，这些公司希望通过Google Workplace(以前的GSuite)的强大工具开始与Google合作并接受其业务方式。</li>
			</ul>
			<h2 id="_idParaDest-18"><a id="_idTextAnchor018"/>与GCP为伍</h2>
			<p>刚才<a id="_idIndexMarker018"/>提到的所有服务都可以通过四个不同的界面访问:</p>
			<ul>
				<li><strong class="bold">谷歌云控制台</strong>:GCP基于网络的用户界面<a id="_idIndexMarker019"/>，可从兼容的网络浏览器如谷歌Chrome、Edge或Firefox轻松访问。对于本书中的动手练习，我们将主要使用谷歌云控制台:</li>
			</ul>
			<div><div><img src="img/B16772_01_001.jpg" alt="Figure 1.1 – Screenshot of Google Cloud Console&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.1–谷歌云控制台截图</p>
			<ul>
				<li><strong class="bold"> Google Cloud SDK </strong>:可以安装<a id="_idIndexMarker020"/>客户端SDK，以便通过命令行与GCP服务进行交互。通过将任务和操作调度到脚本中来实现自动化是非常有用的。</li>
				<li><strong class="bold">客户端库</strong>:<a id="_idIndexMarker021"/>SDK还包括一些客户端库，用于使用最常见的编程语言(如Python、Java和Node.js)与GCP进行交互</li>
				<li><strong class="bold">REST API</strong>:在GCP上执行的任何<a id="_idIndexMarker022"/>任务或操作都可以通过<a id="_idIndexMarker023"/>从任何兼容软件中调用特定的REST API来执行。</li>
			</ul>
			<p>既然我们已经学会了如何与GCP互动，让我们来看看GCP与其他云提供商有何不同。</p>
			<h2 id="_idParaDest-19"><a id="_idTextAnchor019"/>发现GCP的主要竞争优势</h2>
			<p>GCP不是市场上唯一的公共云提供商。其他公司也开始了这种<a id="_idIndexMarker026"/>业务，例如<strong class="bold">亚马逊网络服务</strong>(<strong class="bold">AWS</strong>)<strong class="bold">微软Azure </strong>、<strong class="bold"> IBM </strong>和<strong class="bold">甲骨文</strong>。出于这个原因，在我们深入了解本<a id="_idIndexMarker027"/>书之前，理解GCP与云市场中的其他产品有何不同<a id="_idIndexMarker028"/>可能是有价值的。</p>
			<p>每个云提供商都有自己的使命、战略、历史和优势。让我们来看看为什么谷歌云可以被认为是不同于所有其他云提供商。</p>
			<h3>安全性</h3>
			<p>谷歌<a id="_idIndexMarker029"/>使用谷歌开发和使用的定制硬件，为其全球数据中心提供端到端的安全模型，应用程序加密默认启用。谷歌为GCP采用的安全最佳实践与那些为运行超过10亿用户的应用程序(如Gmail和谷歌地图)而开发的最佳实践相同。</p>
			<h3>全球网络和基础设施</h3>
			<p>在撰写本文时，谷歌的<a id="_idIndexMarker030"/>基础设施在24个不同地区、74个可用区域和144个网络边缘位置可用，使客户能够连接到谷歌的网络，并确保在带宽、网络延迟和安全性方面的最佳体验。这个网络允许GCP用户在不离开谷歌专有网络的情况下跨不同地区移动数据，最大限度地降低了通过公共互联网发送信息的风险。截至今天，据估计约40%的互联网流量通过谷歌的专有网络。</p>
			<p>在下图中，我们可以看到GCP地区在全球的分布情况:</p>
			<div><div><img src="img/B16772_01_002.jpg" alt="Figure 1.2 – A map of Google's global availability&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.2–谷歌全球可用性地图</p>
			<p>最新<a id="_idIndexMarker031"/>版本的地图可以在以下网址看到:<a href="https://cloud.google.com/about/locations">https://cloud.google.com/about/locations</a>。</p>
			<h3>无服务器和完全托管的方法</h3>
			<p>谷歌提供许多完全受管理的无服务器服务，让其客户专注于高价值的活动，而不是维护操作。一个很好的例子是BigQuery，它是无服务器数据仓库，将在本章的下一节介绍。</p>
			<h3>环境可持续性</h3>
			<p>谷歌数据中心使用的能源100%来自可再生能源。此外，谷歌承诺到2030年成为第一家对其所有业务(如数据中心和校园)实现无碳运营的大公司。</p>
			<h3>普适人工智能</h3>
			<p>谷歌是人工智能行业的先驱<a id="_idIndexMarker034"/>，正在利用人工智能和人工智能来改进其消费产品，如谷歌照片，同时也在提高其数据中心的性能和效率。客户可以通过采用AutoML和BigQuery ML等GCP服务来利用谷歌在人工智能和ML方面的所有专业知识。这将是本书的主要焦点。</p>
			<p>既然我们已经讨论了GCP即服务的一些关键要素，让我们更具体地看看AI和ML。</p>
			<h1 id="_idParaDest-20">探索GCP的人工智能和人工智能服务</h1>
			<p>在我们深入了解GCP的所有人工智能和人工智能工具之前，记住谷歌是一家人工智能公司，并在其许多其他产品中嵌入人工智能和人工智能功能，为其客户提供最佳用户体验，这一点非常重要。简单地看一下谷歌的产品，我们可以很容易地察觉到人工智能如何成为一个企业的关键资产。以下是一些例子:</p>
			<ul>
				<li>Gmail智能回复允许用户快速回复电子邮件，根据对话的上下文提供有意义的建议。</li>
				<li>当我们从一个地方移动到另一个地方时，通过结合不同的数据源，谷歌地图能够精确地预测我们的到达时间。</li>
				<li>谷歌翻译为一百多种语言提供翻译服务。</li>
				<li>YouTube和谷歌Play商店能够根据用户偏好推荐最佳视频或最有用的移动应用程序。</li>
				<li>Google相册可以识别照片中的人物、动物和地点，简化了存档和整理照片的工作。</li>
			</ul>
			<p>谷歌证明了在我们的业务中利用人工智能和人工智能的能力为我们带来了新的机遇，增加了我们的收入，节省了资金和时间，并为我们的客户提供了更好的体验。</p>
			<p>为了更好地了解GCP在人工智能和人工智能服务方面的<a id="_idIndexMarker036"/>丰富性，需要强调的是，GCP服务能够满足人工智能模型典型生命周期中出现的所有需求:</p>
			<ol>
				<li>数据集的摄取和准备</li>
				<li>模型的建立和训练</li>
				<li>评估和验证</li>
				<li>部署</li>
				<li>模型的维护和进一步改进</li>
			</ol>
			<p>在下图中，您可以看到整个AI和ML GCP产品组合:</p>
			<div><div><img src="img/B16772_01_003.jpg" alt="Figure 1.3 – GCP AI and ML services represented by their icons&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.3–用图标表示的GCP人工智能和ML服务</p>
			<p>根据客户的需求和技能，上述五个阶段中的每一个都可以完全由用户管理，或者委托给GCP的自动化功能。为此，可以将GCP提供的人工智能和洗钱服务分为三个子类:</p>
			<ul>
				<li><strong class="bold">核心平台服务</strong></li>
				<li><strong class="bold">人工智能应用</strong></li>
				<li><strong class="bold">解决方案</strong></li>
			</ul>
			<p>对于其中的每一个子类别，我们将介绍当前最重要的可用服务以及一些可能从中受益的典型用户。</p>
			<h2 id="_idParaDest-21"><a id="_idTextAnchor021"/>核心平台服务</h2>
			<p>核心人工智能和人工智能<a id="_idIndexMarker037"/>服务是最细粒度的项目，客户可以在GCP上使用它们来开发人工智能和人工智能用例。它们为用户提供了最大的控制和灵活性，但自动化程度较低；用户也需要在ML方面有更多的专业知识。</p>
			<h3>处理单元(CPU、GPU和TPU)</h3>
			<p>借助传统的基础设施即服务方法，开发人员可以为他们的Google计算引擎实例配备强大的处理单元，以加速可能需要很长时间才能运行的ML模型的训练阶段，特别是在需要处理复杂的上下文或大量数据的情况下。除了我们的笔记本电脑上可用的中央处理器外，GCP还提供了Nvidia制造的高性能图形处理器，以加速繁重的计算工作。除此之外，还有<strong class="bold">张量处理单元</strong> ( <strong class="bold"> TPUs </strong>)，它们是专门为支持ML工作负载和执行矩阵计算而设计的<a id="_idIndexMarker044"/>。</p>
			<h3>深度学习虚拟机映像</h3>
			<p>数据科学家面临的最大挑战之一是快速配置环境以开发他们的ML模型。出于这个原因，Google <a id="_idIndexMarker046"/> Cloud提供了预配置的<strong class="bold"> Google计算引擎</strong> ( <strong class="bold"> GCE </strong>)映像，这些映像可以很容易地通过一组预构建的组件和专用于ML的库来提供。</p>
			<p>在下面的截图中，你可以看到<a id="_idIndexMarker047"/>这些<strong class="bold">虚拟机</strong> ( <strong class="bold">虚拟机</strong>)是如何出现在GCP市场的:</p>
			<div><div><img src="img/B16772_01_004.jpg" alt="Figure 1.4 – Deep Learning VM in the GCP marketplace&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.4–GCP市场中的深度学习虚拟机</p>
			<p><strong class="bold">深度学习虚拟机映像</strong>是<a id="_idIndexMarker048"/>，也针对ML工作负载进行了优化，并且已经预先配置为使用GPU。当从GCP <a id="_idIndexMarker049"/>市场提供GCE映像时，它已经配置了最常见的ML框架和编程语言，如Python、TensorFlow、scikit-learn等。这使得数据科学家可以专注于模型的开发，而不是开发环境的供应和配置。</p>
			<h3>张量流</h3>
			<p><strong class="bold"> TensorFlow </strong>是<a id="_idIndexMarker050"/>一个数学、统计和ML的开源框架。它由Google Brain发布，供Google内部使用，然后在Apache License 2.0下发布。它仍然是最成功的谷歌产品的核心。该框架本身支持Python，但也可以用于其他编程语言，如Java、C++和Go。它需要ML专业知识，但它允许用户在定制和灵活性方面取得很大的成果，以开发最佳的ML模型。</p>
			<h3>人工智能平台</h3>
			<p><strong class="bold"> AI平台</strong>是GCP的<a id="_idIndexMarker052"/>集成服务，提供无服务器工具来训练、评估、部署和维护<a id="_idIndexMarker053"/> ML模型。有了这项服务，数据科学家能够只关注他们的代码，简化ML开发的所有附带活动，例如供应、维护和可伸缩性。</p>
			<h3>人工智能平台笔记本</h3>
			<p>AI Platform Notebooks是一项全面管理的服务，为数据科学家提供一个已经与所有其他GCP资源集成和连接的环境。类似于深度学习<a id="_idIndexMarker056"/> VM镜像，<strong class="bold"> AI平台笔记本</strong>实例预配置了最新版本的AI和ML框架，并允许您开发带有图表和书面解释的ML模型。</p>
			<p>到目前为止描述的所有服务都需要很好的ML知识，以及在用最常见的编程语言手工编码方面的经验。核心平台服务满足了数据科学家和ML工程师的需求，他们需要完全控制和灵活使用他们正在构建的解决方案，并且他们已经拥有强大的技术技能。</p>
			<h2 id="_idParaDest-22"><a id="_idTextAnchor022"/>积木</h2>
			<p>在核心平台服务之上，Google Cloud提供了预构建的组件<a id="_idIndexMarker057"/>，可用于加速新的ML用例的开发。这一类别包括以下方面:</p>
			<h3>AutoML</h3>
			<p>与上一节<a id="_idIndexMarker059"/>中概述的<a id="_idIndexMarker058"/>服务不同，<strong class="bold"> AutoML </strong>提供构建ML模型的能力，即使你在该领域的专业知识有限。它利用谷歌的ML功能，允许用户提供他们的数据来训练谷歌已经开发的算法的定制版本。AutoML目前<a id="_idIndexMarker060"/>提供<a id="_idIndexMarker061"/>能力来训练图像(<strong class="bold"> AutoML视觉</strong>)、视频(<strong class="bold"> AutoML视频智能</strong>)、自由文本(<strong class="bold"> AutoML自然语言</strong>)、翻译(AutoML翻译)和<a id="_idIndexMarker062"/>结构化数据(<strong class="bold"> AutoML表格</strong>)的模型。当ML模型被训练并准备好<a id="_idIndexMarker063"/>使用时，它被自动部署并通过REST端点可用。</p>
			<h3>预构建的API</h3>
			<p>Google Cloud <a id="_idIndexMarker064"/>提供了预先构建的API，这些API在表面下利用了ML技术，但已经经过培训并准备好使用。这些API通过一个<a id="_idIndexMarker065"/>标准REST接口公开，该接口可以很容易地将<a id="_idIndexMarker066"/>集成到应用程序中，以处理<a id="_idIndexMarker067"/>图像(<strong class="bold">视觉API </strong>)、视频(<strong class="bold">视频API </strong>)、自由文本(<strong class="bold">自然语言API </strong>)、翻译(<strong class="bold">翻译API </strong>)、电子商务<a id="_idIndexMarker068"/>数据(<strong class="bold">建议AI </strong>)和<a id="_idIndexMarker069"/>对话<a id="_idIndexMarker070"/>场景(<strong class="bold">语音转文本API)对于可以使用通用训练数据集的通用<a id="_idIndexMarker072"/>应用来说，使用预构建的ML API是<a id="_idIndexMarker071"/>的最佳选择。</strong></p>
			<h3>大查询ML</h3>
			<p>由于<strong class="bold"> BigQuery ML </strong>将在本章接下来的章节中<a id="_idIndexMarker073"/>详细讨论，目前您只需要知道这个组件使用户能够使用SQL语言，使用存储在BigQuery中的结构化数据和一系列支持的算法来构建ML <a id="_idIndexMarker074"/>模型。</p>
			<p>这里描述的构建块都不需要任何特定的ML知识，也不需要任何经过验证的编程语言编程经验。事实上，这些服务是为那些不太熟悉ML，但想快速、轻松地开始使用它的开发人员或业务分析师准备的。另一方面，具有ML专业知识的数据科学家也可以利用构建模块来加速模型的开发，从而缩短解决方案的上市时间。</p>
			<p>要查看构造块、其用途及其目标用户的摘要，让我们看一下下表:</p>
			<div><div><img src="img/B16772_01_005.jpg" alt="Figure 1.5 – Building blocks summary table&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.5–构造块汇总表</p>
			<p>既然我们已经学习了积木的基本知识，让我们来看看GCP提供的解决方案。</p>
			<h2 id="_idParaDest-23"><a id="_idTextAnchor023"/>解决方案</h2>
			<p>遵循<a id="_idIndexMarker075"/>增量方法，构建模块和核心平台服务也捆绑在一起，以提供开箱即用的解决方案。这些预先构建的模块可以被公司采用，并立即用于改善他们的业务。本节将介绍这些解决方案。</p>
			<h3>人工智能中心</h3>
			<p>谷歌云的<strong class="bold">人工智能中心</strong>作为人工智能组件的市场<a id="_idIndexMarker076"/>。它可以在<a id="_idIndexMarker077"/>公共模式中使用，以共享和使用由社区开发的资产，该社区在GCP上积极工作，或者它可以在您的公司内部私下使用，以共享ML资产。该服务的目标是简化不同用户之间有价值资产的共享，有利于重用和加速新用例的部署。</p>
			<p>在下面的截图中，你可以看到AI Hub的主页:</p>
			<div><div><img src="img/B16772_01_006.jpg" alt="Figure 1.6 – Screenshot of AI Hub on GCP&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.6–GCP人工智能中心的屏幕截图</p>
			<p>既然我们已经了解了AI Hub的角色，那么让我们来看看云人才解决方案。</p>
			<h3>云人才解决方案</h3>
			<p>云人才解决方案<a id="_idIndexMarker078"/>基本上是一个针对人力资源办公室的解决方案，它使用人工智能改进了<a id="_idIndexMarker079"/>候选人发现和招聘流程。我们不会进一步描述该解决方案，但在本章末尾的<em class="italic">更多资源</em>部分会有一个链接。</p>
			<h3>人工智能联络中心</h3>
			<p><strong class="bold">呼叫中心人工智能</strong>是一种<a id="_idIndexMarker080"/>解决方案，可用于通过人工智能和自动化驱动的呼叫中心来提高<a id="_idIndexMarker081"/>客户体验的有效性。该解决方案基于Dialogflow以及文本到语音和语音到文本API。</p>
			<h3>文件AI</h3>
			<p>该解决方案<a id="_idIndexMarker082"/>侧重于<a id="_idIndexMarker083"/>文档处理，以提取相关信息并简化通常需要手动操作的业务流程。该解决方案能够解析PDF文件、图像和手写文本，将这些信息转换为数字结构化格式，使它们可供访问和研究。</p>
			<p>从他们的描述中很容易看出，谷歌提供的AI解决方案更加面向业务，旨在解决特定的挑战。它们可以被配置和定制，但是基本上是为商业用户服务的。</p>
			<p>在继续之前，让我们看一下下表，它总结了本节中解释的概念<a id="_idIndexMarker085"/>，并提供了不同人工智能和人工智能服务类别的清晰概述:</p>
			<div><div><img src="img/B16772_01_007.jpg" alt="Figure 1.7 – Summary of GCP AI and ML services&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.7-GCP人工智能和物流服务概述</p>
			<p class="callout-heading">小费</p>
			<p class="callout">当您需要开发一个新的用例时，我们建议在尝试重新发明轮子之前使用预先构建的解决方案和构建块。如果一个构建块已经满足了你的用例的所有需求，那么使用它是非常有价值的。这将在开发和维护阶段节省时间和精力。只有当用例非常复杂或者非常特殊，无法用构建块或解决方案解决时，才开始考虑使用核心服务。</p>
			<p>正如我们在本节中看到的，GCP的人工智能和人工智能服务非常广泛。现在，让我们仔细看看这本书的主题:Google BigQuery。</p>
			<h1 id="_idParaDest-24"><a id="_idTextAnchor024"/>引入BigQuery</h1>
			<p>Google BigQuery <a id="_idIndexMarker086"/>是一种高度可扩展的、无服务器的分布式数据仓库技术，由Google于2006年在内部构建，并于2010年在GCP发布供公众使用。由于其架构，它可以存储数Pb的数据，并以高性能和按需扩展来查询它们。由于其无服务器的特性，在BigQuery上存储和查询数据的用户不必管理底层基础设施，可以专注于实现带来业务价值的逻辑，从而节省时间和资源。</p>
			<p>BigQuery目前被许多大型企业使用，这些企业利用它来做出数据驱动的决策，包括Twitter、Home Depot和Dow Jones。</p>
			<h2 id="_idParaDest-25"><a id="_idTextAnchor025"/> BigQuery架构</h2>
			<p>BigQuery有一个<a id="_idIndexMarker087"/>分布式架构，运行在谷歌数据中心的数千个节点上。您的数据集不是存储在唯一的服务器上，而是分块并跨不同区域复制，以保证最高的性能和可用性。</p>
			<p>在BigQuery中，存储层和计算层是完全分离的。这意味着查询引擎运行在与存储数据的服务器不同的服务器上。这个特性使BigQuery在数据量和查询执行方面都具有很好的可伸缩性。这种分离的范式只有在谷歌的Petabit网络的帮助下才有可能，该网络利用谷歌在全球范围内的专有光缆，将数据从一台服务器快速转移到另一台服务器。</p>
			<p>现在让我们更深入地了解BigQuery如何管理存储和计算引擎。</p>
			<h3>存储层</h3>
			<p>与传统的<a id="_idIndexMarker088"/>数据仓库不同，BigQuery以列格式而不是行格式存储数据。这种方法使您能够做到以下几点:</p>
			<ul>
				<li>为每列获得更好的压缩比，因为列中的数据通常是同类的，压缩起来更简单。</li>
				<li>减少要读取的数据量，并为数据仓库用例获得尽可能好的性能，这些用例通常基于表中的少量列和聚合操作，如求和、平均和最大值。</li>
			</ul>
			<p>所有数据都存储在Google专有的分布式文件系统Google File System(代号为Colossus)中。数据的分布使其能够保证更快的I/O性能和在出现故障时更好的数据可用性。Google文件系统基于两种不同的服务器类型:</p>
			<ul>
				<li><strong class="bold">主服务器:</strong>节点<a id="_idIndexMarker089"/>不存储数据，但负责管理每个文件的元数据，例如组成文件的每个块的副本的位置和可用数量。</li>
				<li><strong class="bold">块服务器:</strong>节点<a id="_idIndexMarker090"/>实际存储跨不同服务器复制的文件块。</li>
			</ul>
			<p>在下图中，你可以看到<a id="_idIndexMarker091"/>谷歌文件系统是如何管理数据的:</p>
			<div><div><img src="img/B16772_01_008.jpg" alt="Figure 1.8 – Google File System (Colossus) storage strategy&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.8–谷歌文件系统(巨像)存储策略</p>
			<p>现在我们已经了解了BigQuery如何处理大量数据，让我们看看计算层如何访问这些数据。</p>
			<h3>计算(查询)层</h3>
			<p>计算层与存储完全分离，负责接收来自BigQuery用户的查询语句，并以最快的方式执行它们。该查询引擎基于Dremel，这是一项由谷歌开发的技术，然后在2010年发表在一篇论文中。该引擎利用多级树架构:</p>
			<ol>
				<li value="1">树的根节点接收要执行的查询。</li>
				<li>根节点将查询拆分并分发到其他名为mixers的中间节点。</li>
				<li>混合器节点的任务是在将查询传递给叶节点或其他中间混合器节点之前重写查询。</li>
				<li>叶节点负责并行读取Google文件系统中的数据块。</li>
				<li>当从文件系统中提取出正确的数据块时，叶节点对数据执行计算，并最终将它们转移到其他叶节点。</li>
				<li>在计算结束时，每个叶节点产生一个返回给父节点的结果。</li>
				<li>当所有结果都返回到根节点时，查询的结果被发送给请求执行的<a id="_idIndexMarker093"/>用户或应用程序。</li>
			</ol>
			<p>基于多级树的BigQuery查询的执行过程如下图所示:</p>
			<div><div><img src="img/B16772_01_009.jpg" alt="Figure 1.9 – The BigQuery engine is a multi-level tree&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.9–big query引擎是一个多级树</p>
			<p>每个节点都提供了许多称为BigQuery slots的处理单元来执行查询的业务逻辑。BigQuery槽可以被视为Dremel节点上的虚拟CPU。根据查询的复杂性和受影响的数据量，BigQuery会自动管理执行特定查询所需的槽的计算。</p>
			<h2 id="_idParaDest-26"><a id="_idTextAnchor026"/> BigQuery相对于传统数据仓库的优势</h2>
			<p>现在我们已经<a id="_idIndexMarker094"/>了解了BigQuery的技术架构，让我们来看看与其他传统的内部数据仓库相比，这种架构如何为使用它成为数据驱动型公司的企业带来好处。</p>
			<h3>无服务器</h3>
			<p>正如我们在<a id="_idIndexMarker095"/>中提到的，BigQuery有一个无服务器架构，用户不仅不必管理服务器的供应和维护，还不必管理与操作系统和支持数据仓库功能的数据库软件的升级和修补相关的所有维护操作。由于采用了无服务器方法，用户可以轻松地将数据接收到BigQuery中并使用它，而无需预先执行容量规划或任何硬件和软件配置。这对于原型设计和支持快速失败的方法尤其重要，这种方法有利于创新和实验的文化。</p>
			<h3>可量测性</h3>
			<p>不管<a id="_idIndexMarker096"/>你需要存储的是兆字节的数据还是千兆字节的数据；BigQuery可以在数据存储和处理方面为您提供最大的灵活性和可伸缩性。由于其多租户架构，中小型企业可以利用与大型企业相同的创新能力，或者他们可以从小型用例开始，以后根据业务需求进行扩展。传统的数据仓库技术利用相同的服务器进行存储和计算。因此，它们并不特别适合不平衡的用例，例如需要大量数据存储，但不需要高计算性能，反之亦然。正如我们在上一节中看到的，由于其分离的架构，BigQuery被设计为根据用户的实际<a id="_idIndexMarker097"/>需求独立扩展存储和计算能力，从而降低了解决方案的总拥有成本。</p>
			<h3>有效性</h3>
			<p>得益于<a id="_idIndexMarker098"/>其弹性分布式架构，BigQuery能够提供<strong class="bold">服务水平协议</strong>(<strong class="bold">SLA</strong>)<a id="_idIndexMarker099"/>每月正常运行时间百分比大于99.99%。这个非常高的可用性标准是Google授予的，BigQuery用户不需要付出任何额外的努力，他们不需要考虑高可用性或灾难恢复策略。</p>
			<h3>演出</h3>
			<p>BigQuery引擎<a id="_idIndexMarker100"/>能够在几秒钟内查询TB级数据，在几分钟内查询Pb级数据。这种性能是传统的本地数据仓库很难达到的。更高的性能意味着更快地获得洞察力，以及处理大量数据，如果没有巨大的硬件和软件投资，这些数据通常是无法在内部管理的。为了进一步提高性能，BigQuery提供了启用BigQuery BI引擎的可能性。BigQuery BI Engine是一个内存分析层，可以在BigQuery之上激活，以更快地执行查询，延迟不到一秒。</p>
			<h3>实时</h3>
			<p>传统的数据<a id="_idIndexMarker101"/>仓库是为长批量操作而设计的，通常无法管理实时工作负载。然而，BigQuery提供了一个特定的接口来实时接收数据，使其可以立即用于分析。这一特性为那些希望加快分析速度并克服数据仓库典型方法(通常涉及处理前一天的业务情况)的公司带来了新的可能性。</p>
			<h3>格式灵活性</h3>
			<p>BigQuery <a id="_idIndexMarker102"/>在Google文件系统中以压缩和优化的格式存储文件，但提供了以数据湖技术中通常使用的各种格式加载数据的选项。用户可以使用Avro、ORC、CSV和JSON格式将数据加载到BigQuery中。</p>
			<h3>创新能力</h3>
			<p>BigQuery提供了传统数据仓库中没有的两个<a id="_idIndexMarker103"/> SQL扩展:</p>
			<ul>
				<li><strong class="bold"> BigQuery GIS </strong>:提供<a id="_idIndexMarker104"/>使用SQL语句轻松管理地理空间数据的能力，以执行地理计算和操作</li>
				<li><strong class="bold"> BigQuery ML </strong>:允许用户<a id="_idIndexMarker105"/>在没有编程经验的情况下，利用SQL语言训练、评估和运行ML模型，从而加速ML创新用例的开发</li>
			</ul>
			<h3>安全性</h3>
			<p>默认情况下，BigQuery <a id="_idIndexMarker106"/>会自动加密和解密客户的数据，然后将其存储在Google文件系统中。BigQuery还负责管理和轮换加密和解密密钥。为了进一步提高安全性，BigQuery提供了使用<strong class="bold">客户管理的加密密钥</strong> ( <strong class="bold"> CMEKs </strong>)的选项。在这种情况下，密钥由客户在Google云密钥管理系统中直接管理。</p>
			<p>通过在Google <strong class="bold">身份访问管理系统</strong> ( <strong class="bold"> IAM </strong>)中设置正确的角色，可以防止对数据<a id="_idIndexMarker108"/>的未授权访问和使用。</p>
			<h3>与其他GCP服务的集成</h3>
			<p>使用BigQuery的一大好处是与许多其他GCP服务的本机集成:</p>
			<div><div><img src="img/B16772_01_010.jpg" alt="Figure 1.10 – BigQuery integration with other GCP services&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.10–big query与其他GCP服务的集成</p>
			<p>正如<a id="_idIndexMarker110"/>在<a id="_idIndexMarker112"/>前面的截图中我们可以<a id="_idIndexMarker111"/>看到的，Google BigQuery可以使用外部表从<strong class="bold"> Google Bigtable </strong>、<strong class="bold"> Google Cloud Storage </strong>、<strong class="bold"> Google Cloud SQL </strong>和<strong class="bold"> Google Drive </strong>中读取数据。这个<a id="_idIndexMarker113"/>特性可以简化从其他数据库到BigQuery的数据摄取，这也可以使用ETL/ELT工具<a id="_idIndexMarker115"/>来执行<a id="_idIndexMarker114"/>，例如<strong class="bold"> Google Dataflow </strong>和<strong class="bold">数据融合</strong>。当数据集存储在BigQuery中时，可以从其他GCP <a id="_idIndexMarker116"/>组件访问它们，例如用于数据<a id="_idIndexMarker117"/>处理和<a id="_idIndexMarker118"/>准备的<strong class="bold"> Google DataProc </strong>、<strong class="bold"> DataPrep </strong>、用于数据<a id="_idIndexMarker119"/>可视化的<strong class="bold"> Data Studio </strong>、<strong class="bold"> Looker </strong>和<strong class="bold"> Google Sheets </strong>。BigQuery与人工智能平台<a id="_idIndexMarker120"/>笔记本集成，使数据科学家和工程师能够轻松地从他们的Jupyter环境中访问数据。</p>
			<p>总的来说，将数据引入BigQuery提供了大量的选项，可以根据用户的需求来使用。</p>
			<h3>丰富的合作伙伴生态系统</h3>
			<p>除了与其他GCP服务的集成，谷歌的合作伙伴还提供了与BigQuery的连接器和集成，创建了一个丰富的数据管理生态系统。一些例子包括Informatica、Tableau、Fivetran、Talend和Confluent。</p>
			<h3>公共数据集</h3>
			<p>如果您想使用BigQuery从头开始，您可以利用现有的公共表，这些表可以从BigQuery公共数据集程序中获得。该程序包含有趣的数据集<a id="_idIndexMarker123"/>，这些数据集来自不同行业和不同国家，涉及不同的主题。我们将在下一章中使用一些例子来训练我们的ML模型，包括来自自行车共享服务的交易、纽约市的开放数据和出租车旅行记录。</p>
			<h2 id="_idParaDest-27"><a id="_idTextAnchor027"/>与BigQuery交互</h2>
			<p><a id="_idIndexMarker124"/>有不同的方式与BigQuery交互。它们是:</p>
			<ul>
				<li>Google Cloud Console中的BigQuery web UI是可从web浏览器访问的图形用户界面，代表了与BigQuery交互的最简单方式。</li>
				<li><code>bq</code>命令行，安装Google Cloud SDK时可用。通过将作业和命令包含在脚本中，它可以用于自动化作业和命令。</li>
				<li>BigQuery REST APIs。BigQuery原生提供的API层可用于将该服务与其他应用程序集成。</li>
				<li>客户端库支持使用最常见的编程语言，如C#、Go、Java、Node.js、PHP、Python和Ruby。</li>
				<li>JDBC/ODBC驱动程序由谷歌的合作伙伴Magnitude Simba Driver开发，可用于Windows、macOS和Linux系统。</li>
				<li>第三方和谷歌的合作伙伴已经为他们的应用程序开发了BigQuery连接器，如用于商业智能的Tableau、用于数据摄取和集成的Informatica和Talend。</li>
			</ul>
			<p>出于我们的目的，我们将看看Google Cloud Console中可用的BigQuery web UI，它将在接下来的章节中使用BigQuery ML进行开发。</p>
			<p>在下面的截图中，你<a id="_idIndexMarker125"/>可以看到BigQuery UI是如何出现在GCP控制台中的:</p>
			<div><div><img src="img/B16772_01_011.jpg" alt="Figure 1.11 – BigQuery web and graphical user interface available in the GCP console&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.11–GCP控制台中可用的BigQuery web和图形用户界面</p>
			<p>在左栏中，主要的BigQuery特性是可用的，数据集被列出并对用户可见。在这种情况下，只有一个数据集。</p>
			<p>屏幕的剩余部分被开发画布占据，结果和成果在底部。我们将在<a href="B16722_02_Final_ASB_ePub.xhtml#_idTextAnchor039"> <em class="italic">第2章</em> </a>、<em class="italic">设置您的GCP和BigQuery环境</em>中学习如何使用BigQuery web UI，届时我们将创建一个GCP项目并开始使用BigQuery。</p>
			<h2 id="_idParaDest-28"><a id="_idTextAnchor028"/> BigQuery数据结构</h2>
			<p>大查询结构，如表、视图和ML模型，都组织在数据集中。每个数据集是不同结构的容器，可用于控制对底层数据结构的访问。数据集直接链接到以下内容:</p>
			<ul>
				<li>一个GCP <a id="_idIndexMarker126"/>项目，托管数据集本身，通常与存储成本的计费账户相关联</li>
				<li>在创建时定义的地理位置(区域或多区域),以后不能更改</li>
				<li>分配给数据集的特定名称，该名称在GCP项目中应是唯一的</li>
			</ul>
			<p>在下图中，您可以看到一个由项目、数据集、表和BigQuery ML模型组成的层次结构示例:</p>
			<div><div><img src="img/B16772_01_012.jpg" alt="Figure 1.12 – BigQuery hierarchy: datasets, tables, views, and ML models&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.12–大查询层次结构:数据集、表、视图和ML模型</p>
			<p>如果设置了适当的权限，位于GCP的数据集<em class="italic">项目A </em>也可以被链接到另一个GCP项目<em class="italic">项目B </em>的用户查询。在这种情况下，存储成本计入托管数据集结构的<em class="italic">项目A </em>，而计算成本计入与<em class="italic">项目B </em>相关的计费账户。这正是我们在未来章节中使用BigQuery <a id="_idIndexMarker127"/>公共数据集进行实践练习时将会发生的情况。</p>
			<p class="callout-heading">小费</p>
			<p class="callout">请记住，您的查询只能包括位于同一区域的表。在BigQuery中，不能查询存储在不同地理位置的表。如果要对位于不同地区的表执行查询，需要通过Google云存储将数据导出和导入到同一地区的数据集。</p>
			<p>现在我们已经了解了BigQuery的主要特征，让我们更具体地关注本书的核心:BigQuery ML。</p>
			<h1 id="_idParaDest-29"><a id="_idTextAnchor029"/>发现BigQuery ML</h1>
			<p>开发一个新的ML <a id="_idIndexMarker128"/>模型可能需要很多努力，并且可能是一项耗时的活动。它通常需要不同的技能，是一项复杂的活动，尤其是在大型企业中。ML模型的典型旅程可以总结为以下流程:</p>
			<div><div><img src="img/B16772_01_013.jpg" alt="Figure 1.13 – An ML model's typical development life cycle&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.13–一个ML模型的典型开发生命周期</p>
			<p>前两步涉及<a id="_idIndexMarker129"/>初步原始数据分析和操作:</p>
			<ol>
				<li value="1">在<strong class="bold">数据探索和理解</strong>阶段，数据工程师或数据科学家首先查看数据，试图理解数据集中所有列的含义，然后选择新用例要考虑的字段。</li>
				<li>在<strong class="bold">数据准备</strong>期间，数据工程师过滤、聚集和清理数据集，使其可用并准备好用于随后的训练阶段。</li>
			</ol>
			<p>在这两个最初阶段之后，实际的ML开发过程开始了:</p>
			<ol>
				<li value="1">利用TensorFlow等ML框架和Python等编程语言，数据科学家将参与<strong class="bold">设计ML模型</strong>步骤，在训练数据集上试验不同的算法。</li>
				<li>当选择了正确的ML算法时，数据科学家执行ML模型的<strong class="bold">调整</strong>步骤，应用特征工程技术和超参数调整来获得ML模型的更好性能。</li>
				<li>当模型准备好时，对评估数据集执行最后的<strong class="bold">评估</strong>步骤。这个阶段在不同于训练数据集的新数据集上证明ML模型的有效性，并最终导致资产的进一步细化。</li>
				<li>在开发过程之后，ML模型通常在具有可伸缩性和健壮性需求的生产环境中部署和使用。</li>
				<li>由于不同的输入数据或者为了应用进一步的改进，ML模型也最终在后续阶段被更新。</li>
			</ol>
			<p>所有这些步骤需要不同的技能，并基于不同利益相关者的协作，例如用于数据探索和理解的业务分析师、用于数据准备的数据工程师、用于开发ML模型的数据科学家，以及最终用于使模型在安全、健壮和可扩展的生产环境中可用的IT部门。</p>
			<p>BigQuery ML简化并加速了新ML模型的整个开发过程，允许您做以下事情:</p>
			<ul>
				<li>利用SQL和您公司的现有技能，设计、培训、评估和服务ML模型。</li>
				<li>自动化大多数通常非常耗时的调优活动，以获得有效的模型。</li>
				<li>确保您有一个健壮的、可伸缩的、易于使用的ML模型，利用我们在本章的<em class="italic"> BigQuery优于传统数据仓库</em>一节中已经讨论过的BigQuery的所有固有特性。</li>
			</ul>
			<p>在下图中，您可以看到使用BigQuery ML的ML模型的生命周期:</p>
			<div><div><img src="img/B16772_01_014.jpg" alt="Figure 1.14 – An ML model's development life cycle with BigQuery ML&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.14–使用BigQuery ML的ML模型的开发生命周期</p>
			<p>现在我们已经学习了BigQuery ML的基础知识，让我们看看它可以带来的主要好处。</p>
			<h2 id="_idParaDest-30"><a id="_idTextAnchor030"/> BigQuery ML的好处</h2>
			<p>在ML模型的生命周期中，BigQuery ML可以带来商业和技术上的好处:</p>
			<ul>
				<li>业务用户和数据分析师可以从传统的描述和报告方法发展到新的预测方法，以利用他们现有的SQL技能做出更好的决策。</li>
				<li>在模型的调优阶段，技术用户可以从BigQuery ML的自动化中受益，使用一个独特的集中式工具可以加速ML模型的整个开发过程。</li>
				<li>开发过程进一步加快，因为构建ML模型所需的数据集已经可供正确的用户使用，并且不需要从一个数据存储库移动到另一个数据存储库，这带来了合规性和数据复制风险。</li>
				<li>IT部门不需要管理在生产环境中服务和使用ML模型的基础设施，因为BigQuery无服务器架构本身以可伸缩、安全和健壮的方式支持该模型。</li>
			</ul>
			<p>在我们分析了BigQuery ML可以带来的好处之后，现在让我们看看支持的ML算法是什么。</p>
			<h2 id="_idParaDest-31"><a id="_idTextAnchor031"/> BigQuery ML算法</h2>
			<p>BigQuery ML支持的ML算法列表<a id="_idIndexMarker132"/>正在快速增长。目前，支持以下监督式ML技术:</p>
			<ul>
				<li><strong class="bold">线性回归</strong>:用线性模型预测数值</li>
				<li><strong class="bold">二元逻辑回归</strong>:用于只有两个不同选项(是或否，1或0，真或假)可供选择的分类用例</li>
				<li><strong class="bold">多类逻辑回归</strong>:用于在多个选项之间进行选择的分类场景</li>
				<li><strong class="bold">矩阵分解</strong>:用于开发基于过去信息的推荐引擎</li>
				<li><strong class="bold">时间序列</strong>:利用过去的时间序列数据预测业务KPI</li>
				<li><strong class="bold"> Boosted树</strong>:用于带有XGBoost的分类和回归用例</li>
				<li><strong class="bold"> AutoML表</strong>:利用BigQuery SQL接口的<a id="_idIndexMarker133"/> AutoML功能</li>
				<li><strong class="bold">深度神经网络</strong> ( <strong class="bold"> DNN </strong>):用于开发分类或回归场景的张量流模型，避免任何代码行</li>
			</ul>
			<p>当训练数据集不包含标记数据时，学习被定义为无监督的。BigQuery ML目前支持以下内容:</p>
			<ul>
				<li><strong class="bold"> K-means聚类</strong>:用于数据<a id="_idIndexMarker134"/>相似对象(人、事实、事件)的分割</li>
			</ul>
			<p>除了列出的内容，BigQuery ML还允许您使用SQL语句导入和使用预先训练好的TensorFlow模型。</p>
			<h1 id="_idParaDest-32"><a id="_idTextAnchor032"/>了解BigQuery定价</h1>
			<p>在本节中，将解释BigQuery和BigQuery ML的定价模型。由于GCP服务的价格是不断变化的，我们建议您咨询https://cloud.google.com/bigquery/pricing以获取最新信息。</p>
			<p>让我们看看BigQuery的模型。</p>
			<h2 id="_idParaDest-33"><a id="_idTextAnchor033"/> BigQuery定价</h2>
			<p>根据这项技术的使用，BigQuery的定价是可伸缩的。有三个主要的成本驱动因素:</p>
			<ul>
				<li><strong class="bold">存储</strong>:价格<a id="_idIndexMarker136"/>根据BigQuery中存储的数据量计算。</li>
				<li><strong class="bold">计算</strong>:资源<a id="_idIndexMarker137"/>用于查询、转换和处理数据或训练、评估和使用ML模型。</li>
				<li><strong class="bold">流式传输</strong>:价格<a id="_idIndexMarker138"/>根据通过BigQuery流式传输API获取的记录数量进行计算。</li>
			</ul>
			<h3>储存；储备</h3>
			<p>大查询存储成本是根据数据集的未压缩大小计算的。BigQuery提供了两层存储:</p>
			<ul>
				<li><strong class="bold"> Active </strong>:在过去90天内插入或更新的表中存储的所有数据都被认为是活动的。在撰写本文时，活动存储每月每TB收费20.00美元。</li>
				<li><strong class="bold">Long-term</strong>: All<a id="_idIndexMarker140"/> data stored in tables that have not been modified in the last 90 days is considered long-term storage. At the time of writing, long-term storage is charged at $10.00 per terabyte per month. The change to long-term storage is automatically applied by Google and does not require any action by the BigQuery user.<p class="callout-heading">小费</p><p class="callout">得益于BigQuery长期存储，不再需要将存档的数据转移到谷歌云存储来节省资金。您可以以非常低的成本保持数据在线和可访问。</p></li>
			</ul>
			<h3>计算</h3>
			<p>BigQuery计算开销是根据执行的查询所处理的数据量来计算的。计算成本可能因客户选择的型号而异:</p>
			<ul>
				<li><strong class="bold">按需</strong>:此<a id="_idIndexMarker141"/>为默认选项。在这种情况下，用户只需为实际消耗的资源付费。</li>
				<li><strong class="bold">Flat rate</strong>: This option can be enabled by users or companies that want to have a precise estimation of BigQuery costs and want to keep them stable over time. In this case, a reservation for a specific timeframe is needed and a fixed number of BigQuery slots are assigned to one or multiple GCP projects. As of October 2020, the minimum number of slots that can be reserved is 100 and the minimum time of commitment is 60 seconds. Currently, Google allows you to choose different flat rate options according to the actual requirements. This option can be enabled with a monthly, annual, or flex commitment. The flex option allows you to purchase BigQuery slots for short durations (a minimum of 60 seconds).<p class="callout-heading">小费</p><p class="callout">请记住，存储BigQuery公共数据集是免费的:您只需为访问和查询它们付费。出于这个原因，使用BigQuery公共数据集可能是在BigQuery上执行测试的一种经济高效的方式，只需为计算而不是存储付费。</p></li>
			</ul>
			<h3>流动</h3>
			<p>将数据加载到BigQuery通常是免费的，除了通过BigQuery streaming <a id="_idIndexMarker142"/> API发生的摄取过程。截至2020年10月，通过此接口摄入的每200 MB数据将向您收取0.010美元的费用。每行被视为最小1 KB。</p>
			<p class="callout-heading">小费</p>
			<p class="callout">如果您的用例不要求您实时接收数据，我们建议您使用批量装载机制将数据接收到BigQuery中，这总是免费的。</p>
			<h2 id="_idParaDest-34"><a id="_idTextAnchor034"/> BigQuery ML定价</h2>
			<p>BigQuery ML的定价模型<a id="_idIndexMarker143"/>类似于BigQuery计算成本的定价模型。正如我们在上一节中看到的，客户可以在以下选项中进行选择:</p>
			<ul>
				<li>按需(现收现付)定价模式</li>
				<li>统一费率定价模型</li>
			</ul>
			<p>如果客户已经选择激活固定数量的BigQuery插槽的统一费率模式，那么BigQuery插槽也可以用来训练、评估和运行BigQuery ML模型。</p>
			<p>如果客户使用按需定价模型，有必要将BigQuery ML算法分成两个不同的类别:</p>
			<ul>
				<li><strong class="bold">外部模型</strong>:这个<a id="_idIndexMarker144"/>类别包括boosted trees、DNNs、TensorFlow、AutoML。这些模型是在与BigQuery集成的其他GCP服务上训练的，并且收费不同。</li>
				<li><strong class="bold">内部模型</strong>:这个<a id="_idIndexMarker145"/>类别包括之前提到的所有直接在BigQuery上训练的算法。</li>
			</ul>
			<p>在撰写本文时，内部模型的定价基于ML生命周期主要阶段(训练、评估和预测)处理的数据量:</p>
			<div><div><img src="img/B16772_01_015.jpg" alt="Figure 1.15 – BigQuery ML pricing for internal ML models&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.15–内部ML模型的BigQuery ML定价</p>
			<p>外部模型的定价基于用于模型训练的外部AI平台资源的成本加上应用于顶部的额外BigQuery ML费用:</p>
			<div><div><img src="img/B16772_01_016.jpg" alt="Figure 1.16 – BigQuery ML pricing for external ML models&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.16–外部ML模型的BigQuery ML定价</p>
			<p>在GCP，价格总是在审查之中，随时可能发生变化。为此，我们建议咨询<a href="https://cloud.google.com/bigquery-ml/pricing">https://cloud.google.com/bigquery-ml/pricing</a>。</p>
			<h2 id="_idParaDest-35"><a id="_idTextAnchor035"/>自由运营和自由层级</h2>
			<p>BigQuery免费提供各种各样的操作，以及免费试验这种技术的免费层。</p>
			<p>以下操作<a id="_idIndexMarker147"/>在BigQuery中总是自由的:</p>
			<ul>
				<li>加载数据</li>
				<li>复制数据(除了为复制请求的额外存储)</li>
				<li>导出数据</li>
				<li>删除数据集、表、视图、分区或函数</li>
				<li>任何元数据操作</li>
				<li>读取元数据表和列</li>
				<li>创建或替换<strong class="bold">用户自定义函数</strong>(<strong class="bold">UDF</strong>)</li>
			</ul>
			<p>为了鼓励使用BigQuery进行试验，每个月用户都可以在特定阈值下利用免费的运营预算，如下表所示:</p>
			<div><div><img src="img/B16772_01_017.jpg" alt="Figure 1.17 –  BigQuery ML free tiers&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.17–big query ML自由层</p>
			<p>现在我们已经看到了可以使用的BigQuery免费层，让我们来看看定价计算器。</p>
			<h2 id="_idParaDest-36"><a id="_idTextAnchor036"/>定价计算器</h2>
			<p>如果你想很好地<a id="_idIndexMarker149"/>估计使用按需定价的BigQuery的成本，你可以使用谷歌云定价计算器:【https://cloud.google.com/products/calculator】T21。以下屏幕截图显示了存储、通过流接收和处理以下数据量的每月成本:</p>
			<ul>
				<li>未压缩存储卷:10 TB</li>
				<li>流式插入量:1 GB</li>
				<li>查询处理的数据:150 TB:</li>
			</ul>
			<div><div><img src="img/B16772_01_018.jpg" alt="Figure 1.18 – BigQuery pricing calculator&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">图1.18–big query价格计算器</p>
			<p>您可以使用<a id="_idIndexMarker150"/>价格计算器来估算所有其他GCP服务的消费，以更好地了解您的GCP成本。</p>
			<h1 id="_idParaDest-37"><a id="_idTextAnchor037"/>总结</h1>
			<p>在第一章中，我们已经初步了解了GCP提供了什么，它与其他公共云提供商有何不同，以及谷歌如何基于其无处不在的应用程序(如Gmail和谷歌地图)通过GCP为公司提供优质服务。</p>
			<p>我们还发现，谷歌在人工智能和人工智能方面的成熟经验，是通过制作谷歌照片等产品开发的，也是GCP服务的一部分。每个人工智能和人工智能服务都可以根据用户的技能和背景来处理各种用例以及不同类型的用户。例如，大多数技术用户，如数据科学家，可以利用TensorFlow对他们开发的ML模型进行极大的灵活性和控制，而商业用户可以使用谷歌的解决方案来解决文档AI和联络中心AI的特定挑战。中级类由AI和ML积木组成；这些服务可以加速新的ML用例的开发，或者在整个公司推广创新技术的使用。</p>
			<p>BigQuery就是其中的一个构件:它的扩展BigQueryML通过利用现有的SQL技能支持ML模型的开发。BigQuery ML的使用可以为希望使ML民主化的公司带来巨大的好处，通过简化通常需要不同利益相关者、技能和工具参与的最繁重和最耗时的活动，使大部分员工能够参与进来。</p>
			<p>在下一章中，我们将创建一个新的Google Cloud项目，并首次访问BigQuery。</p>
			<h1 id="_idParaDest-38"><a id="_idTextAnchor038"/>更多资源</h1>
			<ul>
				<li><strong class="bold">谷歌云产品</strong>:<a href="https://cloud.google.com/products/">https://cloud.google.com/products/</a></li>
				<li><strong class="bold">https://cloud.google.com/docs/overview概述</strong>:<a href="https://cloud.google.com/docs/overview">GCP</a></li>
				<li><strong class="bold">为什么GCP与众不同</strong>:<a href="https://cloud.google.com/free/docs/what-makes-google-cloud-platform-different">https://cloud . Google . com/free/docs/what-makes-Google-cloud-platform-different</a></li>
				<li><strong class="bold">谷歌地区和位置</strong>:<a href="https://cloud.google.com/about/locations">https://cloud.google.com/about/locations</a></li>
				<li><strong class="bold">谷歌的可持续发展计划</strong>:<a href="https://sustainability.google/commitments/">https://sustainability.google/commitments/</a></li>
				<li>【艾枢纽】:<a href="https://aihub.cloud.google.com/?hl=en">https://aihub.cloud.google.com/?hl=en</a></li>
				<li><strong class="bold">云天赋大法</strong>:<a href="https://cloud.google.com/solutions/talent-solution?hl=en">https://cloud.google.com/solutions/talent-solution?hl=en</a></li>
				<li><strong class="bold"> BigQuery技术架构</strong>:<strong class="bold"/><a href="https://cloud.google.com/files/BigQueryTechnicalWP.pdf">https://cloud.google.com/files/BigQueryTechnicalWP.pdf</a></li>
				<li><strong class="bold"> BigQuery接口</strong>:<a href="https://cloud.google.com/bigquery/docs/interacting-with-bigquery">https://cloud . Google . com/big query/docs/interactive-with-big query</a></li>
				<li><strong class="bold">big query ML</strong>:<a href="https://cloud.google.com/bigquery-ml/docs">https://cloud.google.com/bigquery-ml/docs</a></li>
			</ul>
		</div>
	

</body></html>